Index: timer.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># timer.py - Knit-to-it Pomodoro Timer \uD83C\uDF45\uD83E\uDDF6\r\n\r\nimport tkinter as tk\r\nfrom tkinter import Frame, Button, Label, messagebox\r\n\r\n\r\nclass PomodoroApp(Frame):\r\n    def __init__(self, master=None):\r\n        super().__init__(master)\r\n        self.master = master or tk.Tk()\r\n        self.pack(fill=\"both\", expand=True)\r\n\r\n        self.timer_label = None\r\n\r\n        self.focus_time = 25 * 60\r\n        self.break_time = 5 * 60\r\n        self.time_left = self.focus_time\r\n        self.running = False\r\n        self.is_break = False\r\n        self.completed_pomodoros = 0   # ← Changed as requested\r\n\r\n        self.show_menu()\r\n\r\n    def clear_window(self):\r\n        for widget in self.master.winfo_children():\r\n            widget.destroy()\r\n\r\n    def add_label(self, text, font, pady=10, fg=\"#2d3436\", bg=None):\r\n        Label(self.master, text=text, font=font, bg=bg or self.master[\"bg\"], fg=fg).pack(pady=pady)\r\n\r\n    def add_button(self, parent, text, command, bg, fg=\"white\", padx=15):\r\n        Button(parent, text=text, bg=bg, fg=fg, font=(\"Arial\", 14), command=command).pack(side=\"left\", padx=padx)\r\n\r\n    def show_menu(self):\r\n        self.clear_window() # Changed this to reduce repeated screens lines 35-40 changed -a\r\n        self.master.configure(bg=\"#f8f9fa\")\r\n        self.add_label(\"\uD83E\uDDF6 Knit-to-it Pomodoro Buddy \uD83E\uDDF6\", (\"Helvetica\", 26, \"bold\"), pady=60)\r\n        self.add_label(\"25 minutes focus • 5 minutes break\", (\"Arial\", 16), fg=\"#636e72\")\r\n        self.add_label(\"Your desktop buddy is walking while you work!\", (\"Arial\", 14))\r\n\r\n        Button(self.master, text=\"Start Pomodoro Session\", font=(\"Arial\", 20, \"bold\"),\r\n               bg=\"#00b894\", fg=\"white\", width=25, height=3, command=self.start_session).pack(pady=40)\r\n\r\n        self.add_label(f\"Completed: {self.completed_pomodoros} \uD83C\uDF45\", (\"Arial\", 18, \"bold\"), fg=\"#e17055\", pady=20)\r\n\r\n        Label(self.master, text=\"25 minutes focus • 5 minutes break\",\r\n              font=(\"Arial\", 16), bg=\"#f8f9fa\", fg=\"#636e72\").pack(pady=10)\r\n\r\n        Label(self.master, text=\"Your desktop buddy is walking while you work!\",\r\n              font=(\"Arial\", 14), bg=\"#f8f9fa\").pack(pady=20)\r\n\r\n        Button(self.master, text=\"Start Pomodoro Session\",\r\n               font=(\"Arial\", 20, \"bold\"), bg=\"#00b894\", fg=\"white\",\r\n               width=25, height=3, command=self.start_session).pack(pady=40)\r\n\r\n        Label(self.master, text=f\"Completed: {self.completed_pomodoros} \uD83C\uDF45\",\r\n              font=(\"Arial\", 18, \"bold\"), bg=\"#f8f9fa\", fg=\"#e17055\").pack(pady=20)\r\n\r\n    def start_session(self):\r\n        for widget in self.master.winfo_children():\r\n            widget.destroy()\r\n\r\n        bg_color = \"#d5f5e3\" if not self.is_break else \"#a29bfe\"\r\n        self.master.configure(bg=bg_color)\r\n\r\n        mode_text = \"FOCUS TIME! \uD83D\uDCDA\uD83E\uDDF6\" if not self.is_break else \"BREAK TIME ☕\"\r\n        Label(self.master, text=mode_text,\r\n              font=(\"Helvetica\", 32, \"bold\"), bg=bg_color, fg=\"#2d3436\").pack(pady=50)\r\n\r\n        self.timer_label = Label(self.master, text=\"25:00\",\r\n                                 font=(\"Helvetica\", 80, \"bold\"), bg=bg_color, fg=\"#2d3436\")\r\n        self.timer_label.pack(expand=True, pady=40)\r\n\r\n        msg = \"Keep knitting and studying!\" if not self.is_break else \"Stretch & relax!\"\r\n        Label(self.master, text=msg,\r\n              font=(\"Arial\", 16), bg=bg_color, fg=\"#636e72\").pack(pady=20)\r\n\r\n        #Refactoring the buttons -a\r\n        btn_frame = Frame(self.master, bg=bg_color)\r\n        btn_frame.pack(pady=30)\r\n        self.add_button(btn_frame, \"Pause\", self.pause, \"#fdcb6e\", fg=\"black\")\r\n        self.add_button(btn_frame, \"Skip →\", self.skip, \"#ff7675\")\r\n        self.add_button(btn_frame, \"Menu\", self.show_menu, \"#b2bec3\")\r\n\r\n        self.time_left = self.break_time if self.is_break else self.focus_time\r\n        self.running = True\r\n        self.countdown()\r\n\r\n    def countdown(self):\r\n        if self.running and self.time_left > 0:\r\n            mins = self.time_left // 60\r\n            secs = self.time_left % 60\r\n            self.timer_label.config(text=f\"{mins:02d}:{secs:02d}\")\r\n            self.time_left -= 1\r\n            self.master.after(1000, self.countdown)  # type: ignore[arg-type]\r\n        else:\r\n            self.finish_phase()\r\n\r\n    def finish_phase(self):\r\n        self.running = False\r\n        if not self.is_break:\r\n            self.completed_pomodoros += 1   # ← Updated\r\n            messagebox.showinfo(\"Pomodoro Complete! \uD83C\uDF89\",\r\n                                f\"You finished Pomodoro #{self.completed_pomodoros}!\\nTime for a break \uD83E\uDDF6\")\r\n        else:\r\n            messagebox.showinfo(\"Break Over!\", \"Back to work! Your buddy is ready \uD83D\uDCAA\")\r\n\r\n        self.is_break = not self.is_break\r\n        self.start_session()\r\n\r\n    def pause(self):\r\n        self.running = False\r\n        messagebox.showinfo(\"Paused\", \"Timer paused. Click 'Start Pomodoro Session' to resume.\")\r\n\r\n    def skip(self):\r\n        self.time_left = 0\r\n        self.finish_phase()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    root = tk.Tk()\r\n    root.title(\"Knit-to-it Pomodoro\")\r\n    root.geometry(\"700x800\")\r\n    root.resizable(False, False)\r\n    app = PomodoroApp(root)\r\n    root.mainloop()\r\n\r\n# Added a launch_timer function to launch the timer -a\r\ndef launch_timer():\r\n    root = tk.Tk()\r\n    root.title(\"Knit-to-it Pomodoro\")\r\n    root.geometry(\"700x800\")\r\n    root.resizable(False, False)\r\n    PomodoroApp(root)\r\n    root.mainloop()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/timer.py b/timer.py
--- a/timer.py	(revision e5ced5338187888ca9c96af86f831eba2eb039b7)
+++ b/timer.py	(date 1763705638924)
@@ -126,10 +126,8 @@
     root.mainloop()
 
 # Added a launch_timer function to launch the timer -a
-def launch_timer():
-    root = tk.Tk()
-    root.title("Knit-to-it Pomodoro")
-    root.geometry("700x800")
-    root.resizable(False, False)
-    PomodoroApp(root)
-    root.mainloop()
\ No newline at end of file
+def launch_timer(master=None):
+    timer_window = tk.Toplevel(master) if master else tk.Tk()
+    PomodoroApp(timer_window)
+    timer_window.mainloop()
+
